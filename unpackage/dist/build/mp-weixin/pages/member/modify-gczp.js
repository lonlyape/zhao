(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/modify-gczp"],{"2e26":function(e,n,i){"use strict";i.r(n);var t=i("393f"),a=i("c480");for(var o in a)"default"!==o&&function(e){i.d(n,e,(function(){return a[e]}))}(o);var u,l=i("f0c5"),r=Object(l["a"])(a["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],u);n["default"]=r.exports},"393f":function(e,n,i){"use strict";var t,a=function(){var e=this,n=e.$createElement,i=(e._self._c,e.__map(e.gczpRestsData.jobType,(function(n,i){var t=e.gongzuoleixing_value.indexOf(n);return{$orig:e.__get_orig(n),g0:t}}))),t=e.__map(e.gczpRestsData.welfare,(function(n,i){var t=e.zhiweifuli_value.indexOf(n);return{$orig:e.__get_orig(n),g1:t}}));e.$mp.data=Object.assign({},{$root:{l0:i,l1:t}})},o=[];i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){return t}))},c480:function(e,n,i){"use strict";i.r(n);var t=i("ff5d"),a=i.n(t);for(var o in t)"default"!==o&&function(e){i.d(n,e,(function(){return t[e]}))}(o);n["default"]=a.a},eb2e:function(e,n,i){"use strict";(function(e){i("cc73");t(i("66fd"));var n=t(i("2e26"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,i("543d")["createPage"])},ff5d:function(e,n,i){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(i("4795")),a=i("2f62");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,n,i,t,a,o,u){try{var l=e[o](u),r=l.value}catch(c){return void i(c)}l.done?n(r):Promise.resolve(r).then(t,a)}function l(e){return function(){var n=this,i=arguments;return new Promise((function(t,a){var o=e.apply(n,i);function l(e){u(o,t,a,l,r,"next",e)}function r(e){u(o,t,a,l,r,"throw",e)}l(void 0)}))}}function r(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function c(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach((function(n){s(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function s(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var g=function(){i.e("components/member/annotation/gczp").then(function(){return resolve(i("cd9d"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("48c4"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/member/choose-region").then(function(){return resolve(i("3605"))}.bind(null,i)).catch(i.oe)},f=i("553c"),p={data:function(){return{data:[],region_id:"",team_value:"",xinzileixing:[{name:"面议",value:0},{name:"月/元",value:1},{name:"日/元",value:2}],xinzi_placeholder:"格式，例：3000-5000",xinzileixing_value:1,xinzi_value:"",gczpRestsData:{},xueliyaoqiu_status:!1,xueliyaoqiu_index:0,xueliyaoqiu_value:"",gongzuonianxian_status:!1,gongzuonianxian_index:0,gongzuonianxian_value:"",gongzuoleixing_value:[],zhiweifuli_value:[],imageList:[],isTextAreaShow:!0,textAreaContent:""}},computed:c({},(0,a.mapState)(["hasLogin","userInfo"])),components:{gczp:g,uniPopup:d,chooseRegion:h},onLoad:function(e){this.loadData(e),this.loadGczpRestsData()},methods:{loadData:function(n){var i=this;return l(t.default.mark((function a(){var o,u;return t.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return u=function(e){var n=[];for(var i in""!=e.region.province_id&&n.push(e.region.province_id),""!=e.region.city_id&&n.push(e.region.city_id),o.team_value=e.team.toString(),o.xinzi_value=e.more.xinzi,o.xinzileixing_value=e.more.xinzileixing,0==o.xinzileixing_value?o.xinzi_placeholder="":1==o.xinzileixing_value&&(o.xinzi_placeholder="请输入薪资"),o.xueliyaoqiu_value=e.more.xueliyaoqiu,o.gczpRestsData.education)o.gczpRestsData.education[i]==o.xueliyaoqiu_value&&(o.xueliyaoqiu_index=i,o.xueliyaoqiu_status=!0);for(var t in o.gongzuonianxian_value=e.more.gongzuonianxian,o.gczpRestsData.term)o.gczpRestsData.term[t]==o.gongzuonianxian_value&&(o.gongzuonianxian_index=t,o.gongzuonianxian_status=!0);o.gongzuonianxian_value=e.more.gongzuonianxian,o.gongzuoleixing_value=e.more.gongzuoleixing,o.zhiweifuli_value=e.more.zhiweifuli,o.region_id=n.join(","),o.textAreaContent=e.content},o=i,e.showLoading({title:"数据加载中"}),t.next=5,i.request.post(i.api.findWorkOneData,{data:{work_id:n.work_id,user_id:i.userInfo.uid}}).then((function(n){n.code?(i.data=n.data,u(n.data)):e.showModal({title:"提示",content:n.msg,showCancel:!1,success:function(n){n.confirm&&e.navigateBack()}})})).catch((function(e){console.log("Error:",e)}));case 5:e.hideLoading();case 6:case"end":return t.stop()}}),a)})))()},loadGczpRestsData:function(){var n=this;return l(t.default.mark((function i(){var a,o;return t.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a="gczpRestsData",o=n,e.getStorage({key:a,success:function(e){o.gczpRestsData=e.data},fail:function(i){n.request.get(n.api.getGczpRestsData,{data:{}}).then((function(n){o.gczpRestsData=n.data,e.setStorage({key:a,data:n.data})}))}});case 3:case"end":return i.stop()}}),i)})))()},togglePopup:function(e,n){"object"==typeof e?(this.isTextAreaShow=!0,this.$refs[e.ref].close()):(this.isTextAreaShow=!1,this.$refs[n].open())},bindTeamInput:function(e){this.team_value=e.detail.value},bindTeamChange:function(e){e.detail.value.length?this.team_value="0":this.team_value=""},bindXinzileixingChange:function(e){this.xinzi_value="","0"==e.detail.value?(this.xinzileixing_value="0",this.xinzi_placeholder=""):"1"==e.detail.value?(this.xinzileixing_value="1",this.xinzi_placeholder="格式，例：3000-5000"):"2"==e.detail.value&&(this.xinzileixing_value="2",this.xinzi_placeholder="请输入薪资")},bindXinziInput:function(e){this.xinzi_value=e.detail.value},bindEducationChange:function(e){this.xueliyaoqiu_status=!0,this.xueliyaoqiu_index=e.detail.value,this.xueliyaoqiu_value=this.gczpRestsData.education[e.detail.value]},bindTermChange:function(e){this.gongzuonianxian_status=!0,this.gongzuonianxian_index=e.detail.value,this.gongzuonianxian_value=this.gczpRestsData.term[e.detail.value]},bindGongzuoleixingChange:function(e){this.gongzuoleixing_value=e.detail.value},bindZhiweifuliChange:function(e){this.zhiweifuli_value=e.detail.value},getChooseRegionVal:function(e){this.region_id=e.region_id},getImageUrl:function(e){this.imageList=e},getPublishTcpValue:function(e){this.isTcp=e.value,this.tcpStatus=e.status,this.isTextAreaShow=e.isTextAreaShow},bindTextArea:function(e){this.textAreaContent=e.detail.value},formSubmit:function(n){var i=n.detail.value,t=[{name:"title",checkType:"notnull",checkRule:"",errorMsg:"请输入标题"},{name:"team",checkType:"notnull",checkRule:"",errorMsg:"请输入招聘人数"},{name:"xueliyaoqiu",checkType:"notnull",checkRule:"",errorMsg:"请选择学历要求"},{name:"gongzuonianxian",checkType:"notnull",checkRule:"",errorMsg:"请选择工作年限"},{name:"contact",checkType:"notnull",checkRule:"",errorMsg:"请输入联系人"},{name:"phone",checkType:"notnull",checkRule:"",errorMsg:"请输入联系电话"},{name:"phone",checkType:"reg",checkRule:"^[1][3-9]{1}[0-9]{9}$",errorMsg:"请正确输入联系电话"},{name:"region_id",checkType:"notnull",checkRule:"",errorMsg:"请选择工作地址"},{name:"details_address",checkType:"notnull",checkRule:"",errorMsg:"请输入详细地址"},{name:"content",checkType:"notnull",checkRule:"",errorMsg:"请输入详情"}];"0"!=i.xinzileixing&&t.push({name:"xinzi",checkType:"notnull",checkRule:"",errorMsg:"请输入薪资"}),this.tcpStatus&&t.push({name:"is_tcp",checkType:"notnull",checkRule:"",errorMsg:"请认真阅读招老板平台发布协议"});var a=f.check(i,t);a?(i.more={xinzi:i.xinzi,xinzileixing:i.xinzileixing,xueliyaoqiu:i.xueliyaoqiu,gongzuonianxian:i.gongzuonianxian,gongzuoleixing:i.gongzuoleixing?i.gongzuoleixing.split(","):[],zhiweifuli:i.zhiweifuli?i.zhiweifuli.split(","):[],details_address:i.details_address},delete i.xinzi,delete i.xinzileixing,delete i.xueliyaoqiu,delete i.gongzuonianxian,delete i.gongzuoleixing,delete i.zhiweifuli,delete i.details_address,e.showLoading({title:"修改中",mask:!0}),this.request.post(this.api.modifyGczp,{data:i}).then((function(n){e.hideLoading(),e.showModal({title:"提示",content:n.msg,showCancel:!1,success:function(n){n.confirm&&e.redirectTo({url:"publish-gczp-list"})}})})).catch((function(n){console.log(n),e.hideLoading(),e.showModal({title:"提示",content:"网络错误",showCancel:!1})}))):this.func.msg(f.error)}}};n.default=p}).call(this,i("543d")["default"])}},[["eb2e","common/runtime","common/vendor"]]]);